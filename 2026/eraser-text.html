<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多行文字擦除效果</title>
    <style>
      * {
        margin: 0;
        padding: 0;
      }

      html,
      body {
        background-color: #000;
        height: 100%;
      }

      .container {
        width: 80%;
        margin: 1em auto;
        line-height: 2;
        text-indent: 2em;
        position: relative;
        font-size: 20px;
      }

      .text {
        color: white;
      }

      .eraser {
        position: absolute;
        /* 完全覆盖父元素内容 */
        inset: 0;
      }

      /* 变量不可使用@keyframe动画，使用自定义属性解决 */
      @property --p {
        syntax: "<percentage>";
        inherits: false;
        initial-value: 0%;
      }

      .eraser-text {
        --p: 0%;

        color: transparent;
        background: linear-gradient(
          to right,
          transparent var(--p),
          black calc(var(--p) + 30px)
        );
        animation: eraser 5s linear forwards;
      }

      @keyframes eraser {
        to {
          --p: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="container">
      <p class="text"></p>
      <p class="eraser">
        <span class="eraser-text"></span>
      </p>
    </div>
    <script>
      const text = document.querySelector(".text");
      const eraserText = document.querySelector(".eraser-text");
      text.innerHTML = `When using the canvas element or the Canvas API, rendering,
      animation, and user interaction usually happen on the main execution thread of a web application.
      The computation relating to canvas animations and rendering can have a significant impact on application performance.
      The OffscreenCanvas interface provides a canvas that can be rendered off screen, decoupling the DOM and the
      Canvas API so that the canvas element is no longer entirely dependent on the DOM. Rendering operations can
        also be run inside a worker context, allowing you to run some tasks in a separate thread and avoid heavy work on the main thread.
      OffscreenCanvas is a transferable object.OffscreenCanvas.getContext()
      Returns a drawing context for the offscreen canvas, or null if the context identifier
      is not supported, or the offscreen canvas has already been set to a different context mode.
      OffscreenCanvas.convertToBlob()
      Creates a Blob object representing the image contained
      in the canvas.OffscreenCanvas.transferToImageBitmap()
      Creates an ImageBitmap object from the most recently rendered image of the OffscreenCanvas.
      See its reference for important notes on managing this ImageBitmap.`;
      eraserText.innerHTML = text.textContent;
    </script>
  </body>
</html>
